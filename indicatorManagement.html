<!DOCTYPE html>
<html>
<head>
    <title>Indicator Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 10px;
            background-color: #0D0F17;
            overflow: hidden;
        }
        h2 {
            text-align: center;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            padding: 8px 12px;
            margin-bottom: 6px;
            color: #d2d4dc;
            background-color: #151824;
            border: 1px solid #d2d4dc;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .indicator-name {
            font-weight: bold;
        }
        .remove-button {
            background-color: #e74c3c;
            color: #fff;
            border: none;
            padding: 6px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        .remove-button:hover {
            background-color: #c0392b;
        }
    </style>
</head>
<body>
    <ul id="indicatorList">
        <!-- Indicators will be dynamically populated here -->
    </ul>

    <script>
        // Function to remove an indicator
        function removeIndicator(indicatorId) {
            // Send a message to the parent to remove the indicator
            window.parent.postMessage({ type: 'removeIndicator', indicatorId: indicatorId }, '*');
        }

        // Listen for messages from the parent to update the indicator list
        window.addEventListener('message', (event) => {
            if (event.data.type === 'updateIndicators') {
                const indicators = event.data.indicators;
                const indicatorList = document.getElementById('indicatorList');
                indicatorList.innerHTML = ''; // Clear existing list

                indicators.forEach(indicator => {
                    const li = document.createElement('li');

                    const nameSpan = document.createElement('span');
                    nameSpan.className = 'indicator-name';
                    nameSpan.textContent = indicator.metadata.name[0] || 'Unnamed Indicator';

                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-button';
                    removeBtn.textContent = 'Remove';
                    removeBtn.onclick = () => removeIndicator(indicator.indicatorId);

                    li.appendChild(nameSpan);
                    li.appendChild(removeBtn);
                    indicatorList.appendChild(li);
                });
            }
        });

        // Notify the parent that the iframe is ready to receive messages
        window.parent.postMessage({ type: 'iframeReady' }, '*');
    </script>
</body>
</html>
